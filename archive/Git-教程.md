---
title: Git æ•™ç¨‹
tags:
  - Git
  - æ•™ç¨‹
categories:
  - ç¼–ç¨‹
  - Tools
abbrlink: 2121b11b
date: 2021-07-02 18:34:43
---

# Git reorganiszed note

é‡æ–°æ•´ç†äº† git çš„å¸¸ç”¨æ“ä½œå‘½ä»¤ï¼Œèƒ½å¤Ÿè¦†ç›–å¤§éƒ¨åˆ†ç‰ˆæœ¬ç®¡ç†åœºæ™¯ï¼Œé€‚åˆä½œä¸ºæçº²è¿›è¡Œå¤ä¹ 

æ•´ç†æ¥è‡ªï¼š[bilibili](https://www.bilibili.com/video/BV1FE411P7B3?from=search&seid=1905221215711628694) [å»–é›ªå³°æ•™ç¨‹](https://www.liaoxuefeng.com/wiki/896043488029600)

## ä¸‹è½½

å½“é‡åˆ°å›½å¤–èµ„æºä¸‹è½½å¾ˆæ…¢çš„æ—¶å€™ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨é•œåƒèµ„æº

è§†é¢‘é‡Œä½¿ç”¨äº†æ·˜å®é•œåƒå®‰è£… windows ç‰ˆæœ¬ https://npm.taobao.org/mirrors/

ubuntu ç›´æ¥ä½¿ç”¨ `apt install git` ä½¿ç”¨é˜¿é‡Œäº‘é•œåƒ

## Git é…ç½®

é¦–å…ˆè¦ç†è§£çš„æ˜¯ï¼Œåœ¨windows ä¸­ git bash çš„åŸºæœ¬æ“ä½œå‘½ä»¤å’Œ Linux  terminal æ˜¯ä¸€æ ·çš„ã€‚åœ¨ Linux ä¸­ git æ˜¯é›†æˆåˆ° terminal å½“ä¸­çš„

### git config

é…ç½®ç”¨æˆ·åå’Œé‚®ç®±

```shell
git config --global user.name 'DeclK'
git config --global user.email '***@qq.com'
```

ä¹‹åçš„æ‰€æœ‰æäº¤éƒ½ä¼šä½¿ç”¨ä½ çš„ç”¨æˆ·å’Œé‚®ç®±

è¿˜å¯ä»¥æ ¹æ®éœ€æ±‚é…ç½®ä»£ç†

```shell
# è®¾ç½®ä»£ç†
git config --global http.proxy http://127.0.0.1:1080
# æŸ¥çœ‹ä»£ç†
git config --global --get http.proxy
# å–æ¶ˆä»£ç†
git config --global --unset http.proxy
```

## Git åŸºæœ¬ç†è®º

ç›´æ¥ä¸Šå›¾ï¼Œé‡ç‚¹å…³æ³¨å·¦ä¾§å‘½ä»¤

<img src="Git-æ•™ç¨‹/image-20210628141830141.png" style="zoom:80%;" />

ä»å·¥ä½œåŒº -> æš‚å­˜åŒºï¼š`git add`

ä»æš‚å­˜åŒº -> æœ¬åœ°ä»“åº“ï¼š`git commit`

ä»æœ¬åœ°ä»“åº“ -> è¿œç¨‹ä»“åº“ï¼š`git push`

è¿™ä¸‰ä¸ªå‘½ä»¤å°±èƒ½å¤Ÿè®©ä½ æ„Ÿå—åˆ° git ç‰ˆæœ¬æ§åˆ¶çš„åŸºæœ¬æµç¨‹

## Git ä»“åº“æ­å»º

### git init & git clone

ç”Ÿæˆä»“åº“(master åˆ†æ”¯)çš„ä¸¤ç§æ–¹æ³•

1. `git init` åˆå§‹åŒ–ï¼Œç”Ÿæˆ .git æ–‡ä»¶
2. `git clone url` å…‹éš†è¿œç¨‹ä»“åº“ï¼Œé»˜è®¤å…‹éš†æ‰€æœ‰åˆ†æ”¯ï¼Œä½†æ˜¯ä»…å°† master åˆ†æ”¯æ£€å‡ºåˆ°æœ¬åœ°ï¼Œå¯é€šè¿‡ git switch åˆ‡æ¢åˆ†æ”¯
3. `git clone -b branch_name url` å…‹éš†æŒ‡å®šåˆ†æ”¯ï¼Œè¿˜å¯åŠ ä¸Š `--single-branch` è¿™æ ·å°†ä¸ä¼šä¿ç•™å…¶ä»–åˆ†æ”¯çš„è®°å½•

åˆ é™¤ä»“åº“åˆ™åªéœ€è¦åˆ é™¤ .git æ–‡ä»¶å¤¹å³å¯

### git proxy ä»£ç†

å¦‚æœåœ¨ clone é¡¹ç›®çš„æ—¶å€™å‘ç°é€Ÿåº¦å¾ˆæ…¢ï¼Œæ¨èä½¿ç”¨å›½å†…çš„é•œåƒæºï¼Œå¦‚ï¼š[gitclone](https://gitclone.com/) [fastgit](https://doc.fastgit.org/zh-cn/)

```shell
git config --global url."https://gitclone.com/".insteadOf https://
git config --global --unset url."https://gitclone.com/".insteadOf
```

å¯ä»¥ä½¿ç”¨ `git config --list` æŸ¥çœ‹å½“å‰çš„é…ç½®ï¼Œå¦‚æœéœ€è¦é‡æ–°é…ç½®çš„è¯ï¼Œå¯ä»¥ç¼–è¾‘ `~/.gitconfig`

ä¸‹è½½ release æ—¶å¯ä»¥ä½¿ç”¨ [github proxy](https://ghproxy.com/)ï¼Œæˆ–è€…ä½¿ç”¨æ²¹çŒ´æ’ä»¶ [github å¢å¼º](https://greasyfork.org/zh-CN/scripts/412245-github-%E5%A2%9E%E5%BC%BA-%E9%AB%98%E9%80%9F%E4%B8%8B%E8%BD%BD) éå¸¸å¥½ç”¨ğŸ‘

æœ‰æ—¶å€™åœ¨ clone è‡ªå·±çš„ç§å¯†ä»“åº“çš„æ—¶å€™ä¹Ÿéå¸¸æ…¢ï¼Œå‡ºç°é”™è¯¯ `port 22: Connection timed out`ï¼Œå¯ä»¥ä½¿ç”¨æ¢ä¸€ä¸ª portï¼Œåœ¨ `~/.ssh/config` ä¸­åŠ å…¥ä¸‹é¢è®¾ç½®ï¼Œ[link](https://docs.github.com/en/authentication/troubleshooting-ssh/using-ssh-over-the-https-port)

```.ssh/config
Host github.com
Hostname ssh.github.com
Port 443
```

## Git æ–‡ä»¶åŸºæœ¬æ“ä½œ

### git status

`git status` æŸ¥çœ‹ git æ–‡ä»¶çŠ¶æ€ï¼Œ`git status file_name` å¯æŒ‡å®šæ–‡ä»¶

æ–‡ä»¶çš„å‡ ç§çŠ¶æ€ï¼š

1. untracked æ–‡ä»¶åœ¨æ–‡ä»¶å¤¹ä¸­ï¼Œä»æ²¡æœ‰ add è¿‡
2. unmodify æ–‡ä»¶å·²ç» commit ä¸”åº“ä¸­æœ€æ–°ç‰ˆæœ¬å’Œå½“å‰æ–‡ä»¶æ˜¯ä¸€è‡´çš„ï¼Œå¯ä»¥é€šè¿‡ `git rm` å°†å…¶ç§»å‡ºç‰ˆæœ¬åº“ç®¡ç†
3. modified æ–‡ä»¶åœ¨ commit æˆ–è€… add è¿‡åæœ‰è¿‡ä¿®æ”¹ï¼Œå¯ä»¥ä½¿ç”¨ `git checkout` ä¸¢å¼ƒä¿®æ”¹
4. staged (æ–‡ä»¶åœ¨ä¹‹å‰ commit è¿‡åæœ‰è¿‡ä¿®æ”¹) ç»è¿‡ addï¼Œæ²¡æœ‰ commit

å½“å­˜åœ¨æ–‡ä»¶ä¸ºä¸­æ–‡å‘½åæ—¶ git status ä¼šæ˜¾ç¤ºä¸ºè½¬ä¹‰æ•°å­—ä¸²å½¢å¦‚ \351\237... è¿™æ ·çš„ä¹±ç è§£å†³æ–¹æ³•å¦‚ä¸‹

```shell
git config --global core.quotepath false
# core.quotepathçš„ä½œç”¨æ˜¯æ§åˆ¶è·¯å¾„æ˜¯å¦ç¼–ç æ˜¾ç¤ºçš„é€‰é¡¹, å½“å­—ç¬¦ä¸ºä¸­æ–‡æ—¶ä¼šè½¬ä¹‰è¾“å‡º
```

### .gitignore

æœ‰äº›æ—¶å€™æˆ‘ä»¬ä¸æƒ³æŠŠæŸäº›æ–‡ä»¶çº³å…¥ç‰ˆæœ¬æ§åˆ¶ä¸­ï¼Œå¯åœ¨ä¸»ç›®å½•ä¸‹å»ºç«‹ .gitignore æ–‡ä»¶ï¼Œå¸¸ç”¨è§„åˆ™å¦‚ä¸‹

1. ä»¥æ–œæ "/"å¼€å¤´è¡¨ç¤ºå¿½ç•¥æ ¹ç›®å½•ä¸‹çš„æŸä¸ªæ–‡ä»¶å¤¹ä¸‹çš„å†…å®¹ï¼Œä¸ä¼šå¿½ç•¥å­æ–‡ä»¶å¤¹ï¼›ä»¥"/"ç»“æŸçš„æ¨¡å¼ï¼Œä¼šå¿½ç•¥ä»»æ„ä½ç½®çš„æŸä¸ªæ–‡ä»¶å¤¹ï¼Œå­æ–‡ä»¶å¤¹ä¹Ÿä¼šå¿½ç•¥ã€‚å¦‚æœä¸€ä¸ªæ¨¡å¼ä¸åŒ…å«æ–œæ ï¼Œåˆ™å®ƒåŒ¹é…é‚£ä¹ˆå°†ä¼šåŒæ—¶å¿½ç•¥åŒåçš„æ–‡ä»¶å’Œç›®å½•

2. ä»¥æ˜Ÿå·"*"é€šé…å¤šä¸ªå­—ç¬¦ï¼Œå³åŒ¹é…å¤šä¸ªä»»æ„å­—ç¬¦ï¼›ä½¿ç”¨ä¸¤ä¸ªæ˜Ÿå·è¡¨ç¤ºåŒ¹é…ä»»æ„ä¸­é—´ç›®å½•ï¼Œæ¯”å¦‚a/**/zå¯ä»¥åŒ¹é… a/z, a/b/z æˆ– a/b/c/zç­‰

    ```gitignore
    /node_modules	# å¿½ç•¥æ ¹ç›®å½•ä¸‹çš„ node_modules æ–‡ä»¶å¤¹
    node_modules	# å¿½ç•¥ node_modules æ–‡ä»¶å’Œæ–‡ä»¶å¤¹
    *.log			# ä¸æäº¤åŒ…å«åç¼€åä¸ºlogçš„æ–‡ä»¶
    ```

3. æˆ‘ä»¬æœ‰æ—¶å€™å¸Œæœ›å¿½ç•¥å¤§éƒ¨åˆ†æ–‡ä»¶ï¼Œä½†ä»…å¯¹å°éƒ¨åˆ†æ–‡ä»¶è¿›è¡Œä¿ç•™ï¼Œå¯ä»¥ä½¿ç”¨åé€‰æ“ä½œ `!`

   é‡‡ç”¨ä¸‹é¢çš„æ–‡ä»¶ç»“æ„ä½œä¸ºä¾‹å­

   ```txt
   - root dir
   	- folder
   		-file_1
   		-file_2
   		-subfolder
   			-file_3
   	file_0
   ```

   ä¸‹é¢æ˜¯ä¸€äº›å¸¸è§ç”¨æ³•

   ```gitignore
   # ignore all files, folders and subfolders
   *
   # do not ignore file in the root folder
   !file_0
   
   # do not ignore the folder in the root folder 
   !folder
   
   # do not ignore the folder and the file
   !folder
   !folder/*
   
   # do not ignore the folder and the subfolder files
   !folder
   !folder/**
   ```

   åé€‰æ“ä½œæœ‰ä¸€ä¸ªè§„åˆ™ï¼šå½“æ‰€é€‰æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹çš„çˆ¶æ–‡ä»¶æ²¡æœ‰è¢«å¿½ç•¥æ—¶ï¼Œåé€‰æ“ä½œæ‰ä¼šæœ‰æ•ˆï¼Œä¾‹å¦‚ä¸‹é¢çš„æ“ä½œæ˜¯ä¸ä¼šæœ‰æ•ˆçš„

   ```gitignore
   # won't work, because folder is ignored
   !folder/file
   ```

   ä¹Ÿå‘Šè¯‰æˆ‘ä»¬ï¼Œfolder å’Œ file çš„è·Ÿè¸ªæ˜¯åˆ†å¼€æ¥çœ‹çš„

### git add

`git add file_name` å°†æ–‡ä»¶åŠ å…¥æš‚å­˜åŒºï¼Œæ–‡ä»¶æˆä¸º staged çŠ¶æ€

`git add .` å°†å½“å‰æ–‡ä»¶å¤¹ addï¼Œæ¯”è¾ƒæ–¹ä¾¿å¿«æ·

### git commit

`git commit -m 'message content'` å°†æš‚å­˜åŒºæ‰€æœ‰æ–‡ä»¶åŠ å…¥åˆ°ç‰ˆæœ¬åº“ä¸­ï¼Œå¹¶ç•™ä¸‹æ­¤æ¬¡æäº¤çš„ message

`git commit -am 'message content'` å°†åŒæ—¶å®Œæˆ `git add all`ï¼ˆå³å°†æ‰€æœ‰æ”¹åŠ¨æ–‡ä»¶åŠ å…¥æš‚å­˜åŒºï¼‰å’Œ `git commit` æ“ä½œ

`git commit --amend` å¯ä»¥ä¿®æ”¹ä¸Šä¸€æ¬¡æäº¤çš„ commit message

å½“ä½ æƒ³è¦å°†æœ€è¿‘çš„å¤šä¸ª commit èåˆä¸ºä¸€ä¸ª commit æ—¶ï¼Œå°±éœ€è¦ git rebase

`git rebase -i HEAD~n` è¿™é‡Œ `-i` ä»£è¡¨ interactive æ¨¡å¼ï¼Œä½ éœ€è¦å°†æœ€å n ä¸ª `pick` æ›¿æ¢ä¸º `squash`ï¼Œä»…ä¿ç•™ä¸€ä¸ª `pick` å³å¯ï¼Œç„¶åä¿å­˜é€€å‡ºï¼Œgit ä¼šå†æç¤ºä½ è¾“å…¥æ–°çš„ commit messageï¼Œè¾“å…¥å®Œæˆåä¿å­˜é€€å‡º 

ä¿®æ”¹é»˜è®¤çš„ git commit editor ä¸º vscodeï¼Œ`git config --global core.editor "code --wait"`

### git rm

`git rm --cached file_name` å°†å·²ç» commit çš„æ–‡ä»¶ä»ç‰ˆæœ¬åº“ä¸­ç§»é™¤å˜ä¸º untracked æ–‡ä»¶

`git rm file_name` ä¸ä½¿ç”¨å‚æ•°åˆ™ä»£è¡¨å½»åº•åˆ é™¤è¯¥æ–‡ä»¶

## Git ç‰ˆæœ¬å›é€€

### git log & git reflog

`git log` æŸ¥çœ‹ commit å†å²è®°å½•ï¼Œidï¼Œä½œè€…ç­‰ä¿¡æ¯

`git reflog` æŸ¥çœ‹æ‰€æœ‰çš„æ“ä½œ

### git reset

`git reset --hard commit_id` å°†å›é€€åˆ°æŸä¸€ä¸ª commit ç‰ˆæœ¬ï¼Œid åªç”¨å†™å‰å‡ ä½ï¼Œgit è‡ªåŠ¨è¯†åˆ«

`git reset --hard HEAD^` å°†å›é€€åˆ°ä¸Šä¸€ä¸ª commit ç‰ˆæœ¬ï¼Œå¦‚æœå›é€€ä¸¤ä¸ªåˆ™æ˜¯ HEAD^^

`--hard` å‚æ•°å…¶å®ä»£è¡¨å›é€€åˆ°æŸä¸ª commit åï¼Œè¯¥ commit ä¹‹åçš„è®°å½•éƒ½ä¼šè¢«ä¸¢å¼ƒã€‚ä½† git æ°¸è¿œéƒ½æœ‰åæ‚”è¯åƒï¼Œå¦‚æœå›é€€åˆ°ä»¥å‰çš„ç‰ˆæœ¬æƒ³è¦å†å›æ¥ï¼Œä½¿ç”¨ git reflog æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤

`git reset --soft commit_id` å›é€€åˆ°ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œå¹¶ä¸æ”¹å˜å·¥ä½œåŒºå’Œæš‚å­˜åŒº

### git checkout

`git checkout filename` èƒ½å¤Ÿè®©æ–‡ä»¶å›åˆ°æœ€è¿‘ä¸€æ¬¡ add æˆ–è€… commit æ—¶çš„çŠ¶æ€

`git checkout commit_id` èƒ½å¤Ÿç›´æ¥å°†å·¥ä½œåŒºåˆ‡æ¢åˆ°æŒ‡å®šç‰ˆæœ¬ã€‚è¿™æ˜¯ä¸€ç§ detached head çŠ¶æ€ï¼Œgit ä¼šå°† HEAD æŒ‡é’ˆæŒ‡å‘è¯¥ commit_idï¼Œä½ å¯ä»¥å¯¹æ–‡ä»¶åšä¸€äº›ä¿®æ”¹ï¼Œç„¶åæäº¤ä¸€ä¸ªæ–°çš„ commitï¼Œæœ€åé€šè¿‡ `git switch -c new_branch` ç”Ÿæˆä¸€ä¸ªæ–°çš„åˆ†æ”¯ã€‚æ‰€ä»¥ git checkout commit_id ç±»ä¼¼äºåˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„åˆ†æ”¯ï¼Œç›¸æ¯”äº `git reset --hard` æ˜¯ä¸€ç§æ›´å®‰å…¨çš„åˆ‡æ¢ç‰ˆæœ¬å‘½ä»¤

### git stash

git stash ä½¿ç”¨åœºæ™¯ï¼šå½“ä½ æ­£åœ¨æŸä¸ªåˆ†æ”¯è¿›è¡Œå¼€å‘ï¼Œå¿½ç„¶æƒ³è¦åˆ‡æ¢åˆ°å…¶ä»–åˆ†æ”¯ï¼Œä½†æ˜¯å½“å‰åˆ†æ”¯çš„å·¥ä½œåŒºçš„å¼€å‘å¹¶æœªå®Œæˆï¼Œä½ ä¸æƒ³è¦æäº¤ä¸€ä¸ª commitï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ä½¿ç”¨ stash

`git stash` å¯ä»¥ç›´æ¥å°†å·¥ä½œåŒºçš„ä¿®æ”¹å­˜å‚¨åˆ°æš‚å­˜åŒºï¼Œç»è¿‡ stash è¿‡åä½ ä¼šå‘ç°ä¹‹å‰ä¿®æ”¹çš„æ–‡ä»¶éƒ½å˜å›äº†æœªæ›´æ”¹çš„å†…å®¹ã€‚å¹¶ä¸”ï¼Œä½ å¯ä»¥è¿›è¡Œå¤šæ¬¡çš„å­˜å‚¨ï¼šstash -> modify -> stash again -> modify again ->...

`git stash save 'message'` å¯ä»¥ç»™æ¯ä¸€æ¬¡ stash è¿›è¡Œå‘½å

`git stash list` å¯ä»¥æŸ¥çœ‹æ‰€æœ‰çš„ stash

`git stash pop` ä¼šé‡Šæ”¾æœ€è¿‘ä¸€æ¬¡çš„ stash æ‰€å­˜å‚¨çš„æ›´æ”¹ï¼Œä½ ä¼šçœ‹åˆ°æœ€å‰ä¿å­˜çš„æ›´æ”¹åˆå›åˆ°äº†æ–‡ä»¶å½“ä¸­

`git stash apply stash@{index}` ä¼šå°†æŒ‡å®š index stash æ‰€å­˜å‚¨çš„å†…å®¹é‡Šæ”¾

`git stash drop stash@{index}` ä¼šåˆ é™¤æŒ‡å®š index stash æ‰€å­˜å‚¨çš„å†…å®¹

### git rebase

rebase ä¸€ç§è¾ƒå±é™©çš„ merge æ“ä½œï¼Œä¼šæ›´æ¢èŠ‚ç‚¹çš„åŸºåº•

```txt
# before rebase
--A--B--M (master branch)
     |
     C--D (feature branch)

#(at feature branch) git rebase master
--A--B--M--C'--D'
```

åœ¨ rebase çš„è¿‡ç¨‹ä¸­éœ€è¦å¤„ç† C, D ä¸ M ä¹‹é—´çš„æäº¤å†²çªã€‚ç”±äºåœ¨å˜åŸºè¿‡åæ— æ³•è¿½æº¯ä»£ç åˆ†æ”¯ä¸åˆå¹¶è¿‡ç¨‹ï¼Œæ‰€ä»¥å¢åŠ äº†è¿½æº¯é—®é¢˜çš„éš¾åº¦

## åˆ†æ”¯ä¸å†²çª

### git branch

ä»è¿™é‡Œæˆ‘ä»¬å¯ä»¥æ›´åŠ æ·±å…¥ç†è§£ git çš„å·¥ä½œå½¢è±¡ï¼Œworking tree

é™¤äº† master åˆ†æ”¯ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åˆ›å»ºå…¶ä»–åˆ†æ”¯ï¼ŒHEAD æ‰€æŒ‡çš„å°±æ˜¯ working tree â€œç”Ÿé•¿â€çš„åœ°æ–¹ï¼Œç„¶åæˆ‘ä»¬å°†åˆ†æ”¯åˆå¹¶ï¼Œä¹Ÿå³è®© master â€œèµ¶ä¸Šæ¥â€ï¼Œå†åˆ é™¤ dev åˆ†æ”¯ã€‚git åˆ†æ”¯è¿˜æœ‰ä¸€ä¸ªä¸€èˆ¬è§„åˆ™æ˜¯ï¼Œmaster åˆ†æ”¯æ°¸è¿œæ˜¯æœ€ç¨³å®šçš„åˆ†æ”¯ï¼Œå¼€å‘éƒ½åœ¨ dev æˆ–å…¶ä»–åˆ†æ”¯ä¸Šè¿›è¡Œ

<img src="Git-æ•™ç¨‹/branch_1.png" style="zoom: 50%;" />

<img src="Git-æ•™ç¨‹/branch_2.png" style="zoom: 50%;" />

<img src="Git-æ•™ç¨‹/branch_3.png" style="zoom:50%;" />

`git branch` å¯ä»¥æŸ¥çœ‹åˆ†æ”¯æƒ…å†µï¼Œä½¿ç”¨ `git branch --all` æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯ï¼ŒåŒ…å«è¿œç¨‹åˆ†æ”¯

`git branch -d branch_name` ç”¨äºåˆ é™¤åˆ†æ”¯

### git switch

`git switch -c branch_name` ä½¿ç”¨ git switch æ¥åˆ›å»ºåˆ†æ”¯

`git switch branch_name` ä½¿ç”¨ git switch æ¥åˆ‡æ¢åˆ†æ”¯

`git switch --guess branch_name` åˆ‡æ¢åˆ°è¿œç¨‹åˆ†æ”¯ï¼Œå› ä¸º git clone é»˜è®¤åªæ˜¾ç¤ºä¸»åˆ†æ”¯ï¼Œå…¶ä»–è¿œç¨‹åˆ†æ”¯è¢«éšè—èµ·æ¥äº†ã€‚å®é™…ä¸Š `--guess` å…¶å®æ˜¯é»˜è®¤é€‰é¡¹ï¼Œæ‰€ä»¥åªä½¿ç”¨ `git swtich branch_name` å°±è¶³å¤Ÿäº†

ä½†æ˜¯æœ‰æ—¶å€™ remote åˆ†æ”¯æ²¡æœ‰è¢«æ‹‰åˆ°æœ¬åœ°æ¥ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ `git fetch origin branch_name` æ¥è·å–è¿œç«¯åˆ†æ”¯

### git merge

`git merge branch_name` å°†æŸä¸ªåˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯

å¦‚æœå‘ç”Ÿäº†å†²çªï¼šä¸¤ä¸ª branch ä¸­åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­æœ‰ä¸åŒçš„ä¿®æ”¹è€Œæ— æ³•åˆå¹¶ï¼Œé‚£ä¹ˆéœ€è¦è§£å†³å†²çªã€‚ï¼ˆåˆ¤æ–­æ–‡ä»¶æ˜¯å¦æœ‰ä¿®æ”¹ï¼Œæ˜¯æ ¹æ® commit id ä¹‹ç±»çš„æ ‡è®°èŠ‚ç‚¹æ¥åˆ¤æ–­çš„ï¼Œä½†æ˜¯å¦å­˜åœ¨å†²çªåˆ™æ˜¯æ ¹æ®æ–‡ä»¶çš„å†…å®¹ï¼‰

<img src="Git-æ•™ç¨‹/branch_4.png" style="zoom:50%;" />

å…ˆä½¿ç”¨ `git status` æŸ¥çœ‹å“ªä¸ªæ–‡ä»¶å‘ç”Ÿå†²çªï¼Œç„¶åä½¿ç”¨ vim ç¼–è¾‘ï¼Œgit ä¼šè‡ªåŠ¨åœ¨æ–‡æ¡£ä¸­æ ‡æ˜å†²çªçš„åœ°æ–¹ã€‚æ€æ ·ä¿®æ”¹æ— æ‰€è°“ï¼Œåªè¦ä½  add & commit è¿‡åï¼Œgit å°±ä¼šé»˜è®¤å†²çªè§£å†³ï¼Œå¹¶å°†ä½ çš„æ–‡ä»¶ä½œä¸ºæœ€æ–°çš„ç‰ˆæœ¬åŠ å…¥ç‰ˆæœ¬åº“ä¸­ï¼Œæ›´æ–° working tree

å¦‚æœå¯¹äº git ä¸­ recursive 3-way merge ç®—æ³•æ„Ÿå…´è¶£ï¼Œå¯ä»¥å‚çœ‹ [ç»´åŸºç™¾ç§‘](https://en.wikipedia.org/wiki/Merge_(version_control))

å¯ä»¥ä½¿ç”¨ `git diff HEAD` æ¥æŸ¥çœ‹å“ªäº›æ–‡ä»¶æœ‰æ”¹å˜ï¼Œæˆ–è€…æœ‰å†²çªï¼ŒæŸ¥çœ‹å•ä¸ªæ–‡ä»¶çš„è¯å¯ä»¥ç›´æ¥ `git diff (--staged) file`ã€‚æˆ‘æœ‰æ—¶ `git apply` ä¼šé‡åˆ°æŠ¥é”™ï¼š`git apply fails with "patch does not apply" error`ï¼Œè¿™é€šå¸¸å‘ç”Ÿåœ¨æˆ‘åœ¨è·¨ç³»ç»Ÿç”Ÿæˆå’Œåº”ç”¨ diff æ–‡ä»¶æ—¶äº§ç”Ÿï¼Œè§£å†³æ–¹æ³•å‚è€ƒ [link](https://stackoverflow.com/questions/4770177/git-apply-fails-with-patch-does-not-apply-error)

```shell
git apply --reject --whitespace=fix *.patch
```

å¯¹äºæŸäº›æ–‡ä»¶æˆ‘ä»¬æƒ³å®Œå…¨ä¿ç•™æˆ‘ä»¬çš„æ”¹å˜ï¼Œå¯ä»¥ä½¿ç”¨ `git checkout --ours path/to/conflicted-file`ï¼ŒåŒç†ä¹Ÿå¯ä»¥ä½¿ç”¨ `--theirs` æ¥å®Œå…¨ä¿ç•™ incoming æ›´æ”¹

## Git Submodule

å½“æˆ‘ä»¬çš„ git é¡¹ç›®ä¾èµ–äºç¬¬ä¸‰æ–¹é¡¹ç›®çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡ git submodule æ¥è·Ÿè¸ªå’Œä½¿ç”¨ç¬¬ä¸‰æ–¹é¡¹ç›®ï¼Œè€Œä¸æŠŠç›´æ¥æŠŠä¸‰æ–¹é¡¹ç›®çš„ä»£ç åŠ å…¥åˆ°è‡ªå·±çš„ repo å½“ä¸­

### æ·»åŠ &åˆ é™¤å­æ¨¡å—

`git submodule add 3rd_party_repo_url [local_path/costum_name]`ï¼Œè¯¥å‘½ä»¤å¯ä»¥ç›´æ¥å°†ä¸‰æ–¹ repo æ‹‰åˆ°æœ¬åœ°ï¼Œå¹¶ä¸”ç»™ä½ çš„å½“å‰ä»“åº“å¢åŠ ä¸€ä¸ª `.gitsubmodules` æ–‡ä»¶ã€‚ä½¿ç”¨ `local_path` å°±å¯ä»¥æŒ‡å®šä½ æ‹‰å–åˆ°ä½ å½“å‰é¡¹ç›®çš„é‚£ä¸ªä½ç½®ï¼Œå¹¶ä¸”è¿˜å¯ä»¥æ›´æ”¹ä¸‰æ–¹ repo çš„åå­—

åˆ é™¤å­æ¨¡å—çš„æ“ä½œä¼šç¹çä¸€äº›ï¼Œçœ‹æ¥ git è®¤ä¸ºä½ æ·»åŠ äº†ä¸€ä¸ªå­æ¨¡å—è¿‡åå°±ä¸åº”è¯¥åˆ é™¤å®ƒ

```shell
git submodule deinit -f a/submodule
rm -rf .git/modules/a/submodule
git rm -f a/submodule
```

### æ‹‰å–å­æ¨¡å—

é€šå¸¸ä½ æ·»åŠ äº†ä¸€ä¸ª git submodule è¿‡åï¼Œå®ƒä¼šè®°å½•è¯¥ submodule çš„ commit idã€‚å½“ä½ æ‹‰å–ä½ è‡ªå·±çš„é¡¹ç›®æ—¶ï¼Œä¸ä¼šè‡ªåŠ¨å°†å­æ¨¡å—æ‹‰å–ä¸‹æ¥ï¼Œä½ éœ€è¦ä½¿ç”¨ `git submodule update --init [submodule_name]` æ¥è·å–å­æ¨¡å—ï¼Œå¹¶ä¸”å­æ¨¡å—çš„ commit id æ˜¯ä¸ä¹‹å‰è®°å½•çš„æ˜¯ä¸€è‡´çš„ã€‚å¦‚æœä¸åŠ  `submodule_name` ä¼šé»˜è®¤æ‹‰å–æ‰€æœ‰çš„å­æ¨¡å—

### è·Ÿè¸ªåˆ†æ”¯

æˆ‘ä»¬æœ‰æ—¶å€™æƒ³è¦ä½¿ç”¨ä¸‰æ–¹é¡¹ç›®çš„æŸä¸ª commit idï¼Œæˆ–è€…æŸä¸ªåˆ†æ”¯ï¼Œæˆ‘ä»¬é€šè¿‡ä»¥ä¸‹æ–¹æ³•å®Œæˆ

1. è¿½è¸ª commit idï¼Œè¿›å…¥ submoduleï¼Œä½¿ç”¨ `git checkout commit_id` æ¥æ›´æ”¹

2. è¿½è¸ª branchï¼Œä¿®æ”¹ `.gitsubmodules` ä¸­çš„é…ç½®

   ```.gitsubmodules
   [submodule "sub_repo"]
   	path = path/to/sub_repo
   	url = git@...
   	branch = branch_name
   ```

   é…ç½®å®Œåä½¿ç”¨ `git submodule sync` ä½¿å¾—æ”¹åŠ¨ç”Ÿæ•ˆ

é€šå¸¸æ¥è¯´éƒ½ä¼šä½¿ç”¨è¿½è¸ª commit id çš„æ–¹æ³•æ¥å¯¼å…¥å­æ¨¡å—ï¼Œä½†æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦æ›´æ–°è¿™ä¸ªå­æ¨¡å—ä¸ºæœ€æ–°çš„ commitï¼Œæ­¤æ—¶éœ€è¦ä½¿ç”¨ `git submodule update --remote` æ¥ä¸è¿œç¨‹çš„æœ€æ–° commit ä¿æŒä¸€è‡´ã€‚è€Œå¦‚æœä½ è®¾ç½®äº†è¿½è¸ªçš„æŸä¸ª branchï¼Œåˆ™ä¼šè¿½è¸ªè¯¥åˆ†æ”¯çš„æœ€æ–° commit

## è¿œç¨‹ä»“åº“

### æ·»åŠ è¿œç¨‹ä»“åº“ github or gitee

gitee ä¸ºå›½å†…ç½‘ç«™ï¼Œä¼ è¾“é€Ÿåº¦æ›´å¿«ã€‚é€šè¿‡ä»¥ä¸‹æ­¥éª¤å°†æœ¬æœºä¸è¿œç¨‹è¿æ¥ï¼ˆä»¥ github ä¸ºä¾‹ï¼‰ï¼š

1. æ³¨å†Œ github è´¦å·

2. ç”Ÿæˆ ssh å…¬é’¥

   1. åœ¨æœ¬æœº user ç›®å½•ä¸‹æ‰¾åˆ° ssh æ–‡ä»¶å¤¹ï¼ˆå®‰è£… git è¿‡åè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šè‡ªåŠ¨ç”Ÿæˆï¼‰

   2. åœ¨ shell ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆ ssh å¯†é’¥ï¼Œå…¶ä¸­ rsa æ˜¯ä¸€ç§åŠ å¯†ç®—æ³• 

      `ssh-keygen -t rsa`

      ä¹‹åä½ å°±èƒ½åœ¨ .ssh æ–‡ä»¶ä¸­æ‰¾åˆ° id_rsa å’Œ id_rsa.pub æ–‡ä»¶

3. æ·»åŠ  id_rsa.pub åˆ° github è´¦æˆ·è®¾ç½®ä¸­

è¿™æ ·å°±æŠŠæœ¬æœºå’Œè¿œç¨‹ä»“åº“è¿æ¥èµ·æ¥äº†ï¼Œå…·ä½“çš„è¯´æ˜¯å°†æœ¬æœºä¸ä½ çš„ github è´¦å·é€šè¿‡ ssh è¿æ¥èµ·æ¥äº†

### git remote

ä½ çš„è´¦å·é‡Œå¯ä»¥æœ‰å¾ˆå¤šçš„ä»“åº“ï¼Œæˆ‘ä»¬æƒ³è¦å°†æœ¬åœ°ä»“åº“ä¸æŸä¸€ä¸ªæŒ‡å®šä»“åº“é“¾æ¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å³å¯

`git remote add origin [url]`

è¿œç¨‹ä»“åº“çš„åå­—å« originï¼Œè¿™æ˜¯ git çš„é»˜è®¤å«æ³•ï¼Œurl æ˜¯ä»“åº“çš„ https æˆ–è€… ssh

`git remote -v` æŸ¥çœ‹æ·»åŠ çš„è¿œç¨‹ä»“åº“ï¼Œ`-v` ä»£è¡¨ verbose æ¨¡å¼ï¼Œè¯¥ä¸å¸¦å‚æ•°ä»…è¿”å›è¿œç¨‹ä»“åº“çš„åå­— `origin` 

`git remote remove origin` ç§»é™¤ä¸è¿œç¨‹ä»“åº“çš„é“¾æ¥

### git push

æŠŠæœ¬åœ°åº“çš„å†…å®¹æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Œä½¿ç”¨ä¸‹é¢å‘½ä»¤

`git push -u orgin master`

è¿™æ ·å°±æŠŠæœ¬åœ° master åˆ†æ”¯å†…å®¹æ¨é€åˆ°äº†è¿œç¨‹çš„ master åˆ†æ”¯ã€‚-u å‚æ•°ä¸º set upstream çš„æ„æ€ï¼Œåœ¨æ¨é€çš„åŒæ—¶å°†æˆ‘ä»¬çš„æœ¬åœ° master åˆ†æ”¯å’Œè¿œç¨‹ master åˆ†æ”¯è”ç³»èµ·æ¥ï¼ˆç›¸å½“äºä½œäº† `git branch -u origin/master` ï¼‰ï¼Œä»Šååˆ™å¯ä»¥ç›´æ¥è¾“å…¥ git push æ¥ç®€åŒ–æ¨é€å‘½ä»¤ï¼Œå¼ºçƒˆå»ºè®®åœ¨ç¬¬ä¸€æ¬¡ push çš„æ—¶å€™å¸¦ä¸Š -u å‚æ•°

å…¶ä»–æœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯çš„ push å’Œè¿æ¥ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼ŒæŠŠä¸Šé¢å‘½ä»¤çš„ master æ”¹ä¸ºå¯¹åº”åˆ†æ”¯çš„åå­—ï¼ˆä¾‹å¦‚ï¼šdev åˆ†æ”¯ï¼‰å³å¯ï¼Œå‰ææ˜¯æœ¬åœ°è¦åˆ‡æ¢åˆ°é‚£ä¸ªåˆ†æ”¯ï¼Œä¸”è¿œç¨‹å­˜åœ¨åŒåçš„åˆ†æ”¯

ä¸ªäººè®¤ä¸º `git push` ä¸€èˆ¬æ˜¯åœ¨åŒåçš„æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯ä¹‹é—´è¿›è¡Œ

### git pull

æ–‡ä»¶å†²çªä¸ä»…å‡ºç°åœ¨æœ¬åœ°çš„ merge å½“ä¸­ï¼Œä¹Ÿå­˜åœ¨åœ¨ push æ“ä½œå½“ä¸­ã€‚push çš„æœ¬è´¨ä¹Ÿæ˜¯å°†æœ¬åœ°å’Œè¿œç¨‹è¿™ä¸¤ä¸ª branch è¿›è¡Œèåˆã€‚å½“è¿™ä¸ªè¿œç¨‹ä»“åº“åªæœ‰ä½ ä¸€ä¸ªäººåœ¨ push æ—¶ï¼Œæ˜¯ä¸ä¼šæœ‰å†²çªçš„ï¼Œå› ä¸ºè¿œç¨‹çš„ working tree åªä¼šä¸€ç›´å¾€å‰å»¶ä¼¸ï¼›å½“æœ‰å¤šä¸ªäººéƒ½åœ¨å¯¹æŸä¸€ä¸ªæ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œworking tree å°±ç›¸å½“äºæœ‰äº†å¤šä¸ªåˆ†æ”¯ï¼Œåœ¨ push çš„æ—¶å€™å°±ä¼šå½¢æˆå†²çªã€‚å¦‚æœæœ‰è¿œç«¯çš„å†²çªå½¢æˆï¼Œå°±éœ€è¦ä½¿ç”¨ `git pull`

`git pull` æœ‰ä¸¤ä¸ªä½œç”¨ï¼Œä¸€ä¸ªæ˜¯æ‹‰å–ä»£ç åˆ°æœ¬åœ°ï¼Œå¦ä¸€ä¸ªæ˜¯å°è¯•ä¸æœ¬åœ°ä»£ç åˆå¹¶ï¼Œå¦‚æœä¸èƒ½ä½¿ç”¨ fast forward åˆå¹¶ï¼Œåˆ™éœ€è¦è‡ªå·±æ¥ä¿®æ”¹å†²çªéƒ¨åˆ†ï¼Œè¿™éƒ¨åˆ†å’Œ `git merge` æ˜¯ä¸€æ ·çš„

### æ­å»ºè‡ªå·±çš„è¿œç¨‹ä»“åº“

> è¿œç¨‹ä»“åº“å®é™…ä¸Šå’Œæœ¬åœ°ä»“åº“æ²¡å•¥ä¸åŒï¼Œçº¯ç²¹ä¸ºäº†7x24å°æ—¶å¼€æœºå¹¶äº¤æ¢å¤§å®¶çš„ä¿®æ”¹ã€‚GitHubå°±æ˜¯ä¸€ä¸ªå…è´¹æ‰˜ç®¡å¼€æºä»£ç çš„è¿œç¨‹ä»“åº“ã€‚ä½†æ˜¯å¯¹äºæŸäº›è§†æºä»£ç å¦‚ç”Ÿå‘½çš„å•†ä¸šå…¬å¸æ¥è¯´ï¼Œæ—¢ä¸æƒ³å…¬å¼€æºä»£ç ï¼Œåˆèˆä¸å¾—ç»™GitHubäº¤ä¿æŠ¤è´¹ï¼Œé‚£å°±åªèƒ½è‡ªå·±æ­å»ºä¸€å°GitæœåŠ¡å™¨ä½œä¸ºç§æœ‰ä»“åº“ä½¿ç”¨ã€‚

ä¾æ—§æ˜¯å‚è€ƒ [å»–é›ªå³°æ•™ç¨‹](https://www.liaoxuefeng.com/wiki/896043488029600/899998870925664)ï¼Œä¸è¿‡è‡ªå·±åœ¨å®ç°æ—¶æœ‰ä¸€äº›åŒºåˆ«ã€‚åœ¨è¿›è¡Œ git clone æ“ä½œæ—¶ï¼Œå…‹éš†çš„é“¾æ¥ä¸åº”è¯¥ä½¿ç”¨ç»å¯¹è·¯å¾„ `git clone git@server:/srv/sample.git` åº”è¯¥å»æ‰ç¬¬ä¸€ä¸ªæ–œæ  `git clone git@server:srv/sample.git`

### ä»…ä¿ç•™å½“å‰ commit

éšç€ commit çš„æ•°é‡è¶Šæ¥è¶Šå¤šï¼Œå¯èƒ½æˆ‘ä»¬åªæƒ³ä¿ç•™æœ€æ–°çš„ä»£ç ï¼Œä¸æƒ³å†åšå†å²ç‰ˆæœ¬çš„ç®¡ç†äº†ã€‚å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•

```shell
# 1. åˆ‡æ¢åˆ†æ”¯
git checkout --orphan latest_branch
# 2. æ·»åŠ åˆ°æš‚å­˜åŒº
git add -A
# 3. æäº¤æ›´æ”¹
git commit -am "commit message"
# 4. åˆ é™¤åˆ†æ”¯
git branch -D master
# 5. é‡å‘½ååˆ†æ”¯
git branch -m master
# 6. å¼ºåˆ¶æäº¤åˆ°è¿œç¨‹ä»“åº“
git push -f origin master
```

## Git + IDE

ç°åœ¨ git å’Œå¾ˆå¤š IDE éƒ½æœ‰è”åŠ¨ï¼Œå¯ä»¥ç›´æ¥åœ¨ IDE ä¸­æ–¹ä¾¿çš„æ“ä½œ gitï¼Œç”šè‡³å°† git å¯è§†åŒ–ï¼Œå¯ä»¥ç›´è§‚çœ‹åˆ°ä½ å¯¹æ–‡ä»¶çš„ä¿®æ”¹

ä»¥ pycharm å’Œ vscode ä¸ºä¾‹ï¼Œåªè¦åœ¨ä½ çš„é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹æœ‰ .git æ–‡ä»¶å³å¯ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä½¿ç”¨ git init æ–°å»º 

## Gitlab

å¦‚ä½•åœ¨æœ¬åœ°æ­å»º gitlab æœåŠ¡å™¨è¿›è¡Œä»£ç ç®¡ç†ï¼Œå‚è€ƒ [link](https://developer.aliyun.com/article/922952) [CSDN](https://blog.csdn.net/BThinker/article/details/124097795)

1. æŸ¥è¯¢å¯ç”¨çš„ gitlab docker é•œåƒï¼Œå¹¶è¿›è¡Œå®‰è£…ï¼Œæˆ‘è¿™é‡Œç›´æ¥ä½¿ç”¨ `docker pull gitlab/gitlab-ce` å°±ä¼šé»˜è®¤ pull æœ€æ–°çš„ gitlab é•œåƒ

2. è¿è¡Œ gitlab å®¹å™¨

   ```shell
   docker run -d \
   -p 10008:80 \
   -p 10009:443 \
   -p 10010:22 \
   --restart always \
   --name gitlab \
   --hostname gitlab.example.com \
   -v /home/gitlab/etc/gitlab:/etc/gitlab \
   -v /home/gitlab/var/log/gitlab:/var/log/gitlab \
   -v /home/gitlab/var/opt/gitlab:/var/opt/gitlab \
   --privileged=true \
   gitlab/gitlab-ce
   ```

   è§£é‡Šä¸‹å…¶ä¸­çš„å‚æ•°ï¼š

   - `-d` è¡¨ç¤ºåå°è¿è¡Œå®¹å™¨ï¼Œå¹¶è¿”å›å®¹å™¨ id
   - `-p` æ˜¯å°†å®¹å™¨å†…çš„ç«¯å£æ˜ å°„åˆ°ä¸»æœºç«¯å£ï¼Œä¾‹å¦‚ `-p 10008:80` è¡¨ç¤ºå°†å®¹å™¨å†…çš„ 80 ç«¯å£æ˜ å°„åˆ° 10008 ç«¯å£ï¼Œå¯¹äºä¸»æœºç«¯å£æ²¡æœ‰ç‰¹åˆ«è¦æ±‚ï¼Œä¸€èˆ¬éšæ„æŒ‡å®šç©ºé—²ç«¯å£å³å¯
   - `--restart` å®¹å™¨è‡ªå¯åŠ¨
   - `--priviledged` è·å¾—ä¸»æœº root æƒé™
   - `-v` æ˜¯æŒ‚è½½æ•°æ®å·ï¼Œå¦‚æœæ²¡æœ‰è¿™äº›è·¯å¾„ï¼Œä¼šè‡ªåŠ¨åˆ›å»º
   - `--hostname` ä»£è¡¨ä¸»æœºåï¼Œå¯åŠ å¯ä¸åŠ ï¼Œä»…ä½œä¸ºä¸€ä¸ªæ ‡è¯†ï¼šä¹‹åæˆ‘ä»¬å¯å°†é…ç½®è¯¥åå­—ä½œä¸ºè®¿é—®åŸŸå

3. ä¿®æ”¹ `gitlab.rb` æ–‡ä»¶

   éœ€è¦ä½¿ç”¨ sudo æƒé™ `sudo vim /home/gitlab/etc/gitlab/gitlab.rb`ï¼Œä¸»è¦ä¿®æ”¹ä¸‹ ipã€ç«¯å£ã€æ—¶åŒº

   ```shell
   external_url 'http://172.17.0.1'			# using ifconfig to see your own ip
   # external_url 'http://gitlab.example.com'	# using specified domain name
   gitlab_rails['gitlab_ssh_host'] = '172.17.0.1'
   gitlab_rails['gitlab_shell_ssh_port'] = 10010 
   gitlab_rails['time_zone'] = 'Asia/Shanghai'
   ```

   è¿›å…¥ docker ä¿®æ”¹ `gitlab.yml` ä¸­çš„ `host & port` ä¸ºè‡ªå·±çš„ ipï¼ˆåœ¨å®éªŒè¿‡åå‘ç°ç«¯å£å¹¶ä¸æ˜¯å¿…é¡»ä¿®æ”¹çš„ï¼Œé»˜è®¤80å³å¯ï¼‰

   ```shell
   docker exec -it gitlab bash
   vi /opt/gitlab/embedded/service/gitlab-rails/config/gitlab.yml
   ```

   <img src="Git-æ•™ç¨‹/image-20250115185915152.png" alt="image-20250115185915152" style="zoom:67%;" />

4. åœ¨ gitlab å®¹å™¨ä¸­é‡å¯æœåŠ¡ `gitlab-ctl restart`ï¼Œç„¶å exit å³å¯ã€‚é€šè¿‡ 10008 ç«¯å£åœ¨æµè§ˆå™¨ä¸­è®¿é—®å³å¯ http://172.17.0.1:10008

5. ä»¥åˆå§‹ root ç”¨æˆ·è¿›è¡Œç™»å½•ï¼Œåˆå§‹å¯†ç é€šè¿‡ `sudo cat /home/gitlab/etc/gitlab/initial_root_password` å¯ä»¥æŸ¥çœ‹ã€‚ç™»å½•è¿‡åå¯ä»¥ä¿®æ”¹å¯†ç ã€‚ä¹‹åå¯ä»¥é€šè¿‡è¿™ä¸ª root ç”¨æˆ·æ·»åŠ æ­£å¸¸çš„æ™®é€šç”¨æˆ·

6. æ›´æ”¹åŸŸå

   å› ä¸ºä¸æƒ³æ¯ä¸€æ¬¡éƒ½ä½¿ç”¨ ip å’Œç«¯å£å»ç™»å½•ï¼Œæ ¹æ®è‡ªå·±çš„æ‘¸ç´¢å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹å¼åšåˆ°ï¼š

   1. å°†è‡ªå·±çš„åŸŸåæ·»åŠ åˆ° `/etc/hosts` å½“ä¸­ï¼Œè¿™ä¸ªåŸŸåå¯ä»¥æ˜¯ä»»æ„çš„ï¼Œä¸éœ€è¦æ˜¯æ³¨å†ŒåŸŸåï¼Œè¿™é‡Œç›¸å½“äºåšäº†ä¸€ä¸ªç®€å•çš„æ˜ å°„ï¼Œé€šè¿‡è¿™ä¸ªåŸŸåå°±èƒ½å¤Ÿç›´è¾¾æˆ‘ä»¬çš„ gitlab docker serviceã€‚ä½†æ˜¯è¿™ä¸ªåŸŸåçš„åå­—æ˜¯æœ‰è¦æ±‚çš„ï¼Œç»è¿‡å¤šæ¬¡æµ‹è¯•ï¼Œæˆ‘å‘ç°ä½¿ç”¨ `gitlab.xxx.com` æ˜¯èƒ½å¤Ÿé€šè¿‡çš„ï¼Œå¦åˆ™å°†é¢ä¸´ `HTTP 502: Waiting for GitLab to boot` é—®é¢˜
   2. ä¿®æ”¹ç«¯å£åªèƒ½åœ¨åˆ›å»º docker å®¹å™¨çš„æ—¶å€™æ›´æ”¹ï¼Œå¯ä»¥å°† host å’Œ container çš„ç«¯å£ä¿æŒä¸€è‡´ `80, 443, 22`ï¼Œè¿™ä¸‰è€…åˆ†åˆ«ä¸º http & https & ssh æœåŠ¡ç«¯å£ï¼Œè¿™æ ·å°±ä¸éœ€è¦æ¯æ¬¡ç™»å½•çš„æ—¶å€™éƒ½è¾“å…¥ç«¯å£äº†
   3. é€šè¿‡ä¿®æ”¹ä¸Šè¿° `gitlab.yml` ä¸­çš„ `host & ssh_host` æ›´æ”¹åŸŸå
   4. ï¼ˆå¯é€‰ï¼‰é€šè¿‡ä¿®æ”¹ä¸Šè¿° `gitlab.rb` ä¸­çš„ `external_url` æ›´æ”¹åŸŸåã€‚æˆ‘å‘ç°å³ä½¿ä¸æ›´æ”¹ä¹Ÿä¸å½±å“åŠŸèƒ½
   
   ç”±äºå®åœ¨æ²¡ç²¾åŠ›æ ssl è¯ä¹¦äº†ï¼Œæ•…åˆ°æ­¤ç»“æŸï¼
