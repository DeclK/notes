---
title: VSCode æ•™ç¨‹
tags:
  - VSCode
  - æ•™ç¨‹
categories:
  - ç¼–ç¨‹
  - Tools
abbrlink: ca50f614
date: 2021-07-25 22:52:02
---

# VSCode note

å­¦ä¹ è§†é¢‘ [bilibili](https://www.bilibili.com/video/BV1ty4y1S7mC?p=1)

## å®‰è£…

ç›´æ¥åœ¨å®˜ç½‘ä¸€é”®ä¸‹è½½ï¼Œå®‡å®™ç¬¬ä¸€å¼€å‘å·¥å…·ï¼Œè€Œä¸”è¿˜æ˜¯å…è´¹çš„:laughing: ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ vscodeï¼Œæœ‰æ—¶å‡ºç°ä¸€äº›è«åå…¶å¦™çš„ bug:cry:ï¼Œå¯ä»¥ä½¿ç”¨å‰å‡ ä¸ªç‰ˆæœ¬çš„ï¼Œå¦‚æœç”¨ç†Ÿäº†æŸä¸€ä¸ªç‰ˆæœ¬é‚£æš‚æ—¶ä¸è¦æ›´æ–°äº†å§ã€‚å¦‚æœæƒ³è¦å®Œæ•´å¸è½½çš„è¯éœ€è¦åˆ é™¤ `usr/.vscode` å’Œ `AppData/Code` æ–‡ä»¶ï¼Œæ„Ÿè§‰æ•´ä½“æ¥çœ‹ vscode ä¾ç„¶æ˜¯åœ¨å‘å±•å½“ä¸­çš„å¼€å‘å·¥å…·

### Getting started

1. vscode æ”¯æŒæ›´æ¢ä¸»é¢˜çš®è‚¤

2. vscode æ”¯æŒæ’ä»¶æ‰©å±•ï¼Œèƒ½å¤Ÿå®ç°å¤šç§åŠŸèƒ½æ¥æé«˜ç¼–ç¨‹æ•ˆç‡ï¼Œå¦‚ä¸‹è½½ä¸åŒè¯­è¨€ï¼Œé«˜äº®ä»£ç ç­‰ç­‰ï¼Œæ¨èçš„æ’ä»¶ï¼šPython, Gitlens, Remote SSH

3. é€šè¿‡å¿«æ·é”® palette æŸ¥æ‰¾æ–‡ä»¶ Ctrl + Pï¼ŒæŸ¥æ‰¾å‘½ä»¤ Ctrl + Shift + Pï¼ŒæŠ˜å å·¦ä¾§å·¥å…·æ  Ctrl + B

   å¯ä»¥ä¿®æ”¹ä¸€äº›ä½ å¸¸ç”¨å‘½ä»¤çš„å¿«æ·é”®ï¼Œæˆ‘ä¿®æ”¹äº†å¦‚ä¸‹å‘½ä»¤ï¼š

   1. Run in python file: Ctrl + enter
   2. Start debugging: Shift +enter
   3. Close panels: Ctrl + Alt + P
   4. Insert Line Above/Below: Ctrl + Shifg + \\ or Enter
   5. Collapse folders: Ctrl + Shift + F

4. è®¾ç½®é¢æ¿å¿«æ·é”® Ctrl + ,

5. æ–°å»ºä¸€ä¸ªæ–‡ä»¶ Ctrl + N

## äº¤äº’å¼æ¼”ç»ƒåœº Interactive Playground

ä¸€äº›ç¼–è¾‘çš„å°æŠ€å·§

1. åŒæ—¶é€‰ä¸­åŒåå­—æ®µ Ctrl + Shift + Lï¼Œä½†è¿™ä¸ªåŠŸèƒ½æ²¡æœ‰ Refactoring æ™ºèƒ½

2. IntelliSense è‡ªåŠ¨è¡¥å…¨ api åŠŸèƒ½ Ctrl + space
3. è¡Œæ“ä½œ
   1. å¤åˆ¶è¡Œï¼Œåœ¨æ²¡æœ‰ä»»ä½•ä¸œè¥¿é€‰ä¸­çš„æ—¶å€™ç›´æ¥ Ctrl + C
   2. ä¸Šä¸‹ç§»åŠ¨è¡Œï¼ŒAlt + ä¸Šä¸‹é”®
   3. åˆ é™¤è¡Œ Ctrl + Shift + K

4. Formatting è§„èŒƒä»£ç ï¼Œéœ€è¦è‡ªå·±å®šä¹‰ format

5. ä½¿ç”¨ Alt + Z æ¥ä½¿å¾—æ–‡æœ¬èƒ½å¤Ÿè‡ªé€‚åº”çª—å£å¤§å°ï¼Œå°±åƒ typora ä¸€æ ·

## ä¸€äº›æ¨èçš„è®¾ç½®

æ‰“å¼€ settings

1. åœ¨ç†Ÿæ‚‰ä¹‹åå…³é—­ welcome/startup ç•Œé¢
2. å»ºè®®ä½¿ç”¨è‹±æ–‡ç•Œé¢
3. è®¾ç½®å­—ä½“ JetBrains Monoï¼Œè¿˜å¯ä»¥é¡ºä¾¿è®¾ç½®ä¸€ä¸‹å­—å·ã€‚å®‰è£…å­—ä½“[æ•™ç¨‹](https://blog.csdn.net/HUSTHY/article/details/104023077)
4. è®¾ç½®æ˜¯å¦æ˜¾ç¤ºç¼©ç•¥å›¾ minimap
5. è®¾ç½® restore windows æ˜¯å¦ç›´æ¥æ¢å¤ä¸Šä¸€æ¬¡çš„é¡¹ç›®
6. è®¾ç½®å¼€å¯ Trims final newlines è‡ªåŠ¨æ¶ˆé™¤æ–‡ä»¶æœ«å°¾å¤šä½™çš„ç©ºè¡Œ

## Python

ä¸‹è½½ Python æ’ä»¶

### Get Started

1. åœ¨åº•éƒ¨çš„ status bar æ·»åŠ  python è§£é‡Šå™¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ palette æ¥æ·»åŠ  interpreterã€‚ä¼šè‡ªåŠ¨æ£€æµ‹åˆ°ç”µè„‘ä¸Šçš„ python interpreter (åŒ…æ‹¬ anaconda ä¸­åˆ›å»ºçš„ç¯å¢ƒ)

2. å»ºç«‹ debug ç¯å¢ƒ craete a launch.json fileï¼Œç›´æ¥ä½¿ç”¨é»˜è®¤å€¼å°±å¥½ï¼Œè¯¦ç»†è¯´æ˜åœ¨ [çŸ¥ä¹](https://zhuanlan.zhihu.com/p/142642410)

   è¡¥å……ï¼šé»˜è®¤é…ç½®åª debug å½“å‰ folder ä¸‹çš„ä»£ç ï¼ˆâ€œè‡ªå·±â€çš„ä»£ç ï¼‰ï¼Œå¦‚æœæ˜¯ pip/conda install å®‰è£…çš„ä»£ç ï¼ˆâ€œåˆ«äººâ€çš„ä»£ç ï¼‰ï¼Œæ˜¯ä¸ä¼šè¿›è¡Œ debug çš„ã€‚å¦‚æœæƒ³è¦ debug æ‰€æœ‰ä»£ç åˆ™é…ç½®æ–‡ä»¶éœ€è¦åŠ ä¸Š `"justMyCode": false` [CSDN](https://blog.csdn.net/g534441921/article/details/102743393)

   è¡¥å……ï¼šå¯¹äºéœ€è¦ä¼ å‚æ•°çš„ python è„šæœ¬è°ƒè¯•å¯ä»¥å‚è€ƒ [çŸ¥ä¹](https://www.zhihu.com/question/50700473)

3. Jupyter notebook æ˜¯æ’ä»¶é‡Œè‡ªå¸¦çš„åŠŸèƒ½ï¼Œç›´æ¥æ‰“å¼€ ipynb æ–‡ä»¶å°±å¯ä»¥è¿è¡Œä»£ç å—ï¼é€šè¿‡é€‰æ‹© notebook ä¸­çš„ kernel (å…·ä½“ä¸€ç‚¹è¯´å°±æ˜¯é€‰æ‹© conda ä¸­çš„ç¯å¢ƒ) å°±èƒ½åœ¨ä½ æƒ³è¦çš„ç¯å¢ƒä¸­è¿è¡Œäº†ï¼Œéå¸¸æ–¹ä¾¿

4. å½“ workspace æ¯”è¾ƒå¤§çš„æ—¶å€™ Pylance å¯èƒ½åŠ è½½å¾—å¾ˆæ…¢ï¼Œå‚è€ƒ [Stack Overflow](https://stackoverflow.com/questions/50389852/visual-studio-code-intellisense-not-working) åœ¨ Folder ä¸‹æ–°å»º pyrightconfig.json è¿›è¡Œé…ç½®ï¼ˆæ³¨æ„ä¸æ˜¯åœ¨ .vscode/ ä¸‹æ–°å»ºï¼Œè€Œæ˜¯ç›´æ¥åœ¨ workspace root ä¸‹ï¼

   ```json
   {
     "exclude": [
       "**/data",
       ".git"
     ]
   }
   ```
   
5. **å¼€å¯ Sticky Scroll**ï¼Œè¿™å¯¹é•¿ä»£ç éå¸¸å‹å¥½ï¼Œèƒ½å¤Ÿç›´æ¥çœ‹åˆ°å½“å‰çš„ç±»å’Œå‡½æ•°æ˜¯å“ªä¸ª

### å°†æ³¨é‡Šè®¾ç½®ä¸ºæ–œä½“

åœ¨ä¸ç»æ„é—´çœ‹åˆ°äº†è¿™ä¸ªæŠ€å·§ï¼Œå¯ä»¥æ›´æ”¹ user `settings.json` æ–‡ä»¶å¦‚ä¸‹

```json
    "editor.tokenColorCustomizations": {
      "textMateRules": [
          {
              "scope": "comment",
              "settings": {
                  "fontStyle": "italic",
                  "foreground": "#7f8c8d"
              }
          }
      ]
  }
```

### è¿æ¥åˆ°è¿œç¨‹æœåŠ¡å™¨

ç”±äºè¦è·‘ä¸€äº›æ¨¡å‹ï¼Œè‡ªå·±çš„ç”µè„‘æ˜¾å¡æ ¹æœ¬è·‘ä¸åŠ¨ï¼Œé‚£å°±~~ç™½å«–~~è¿æ¥åˆ°å®éªŒå®¤çš„æœåŠ¡å™¨â€‹

é€šè¿‡ vscode Extensions: `Remote-SSH` å®Œæˆï¼Œ[çŸ¥ä¹](https://zhuanlan.zhihu.com/p/141205262)

åœ¨ Remote Expolorer -> SSH TARGETS -> config ä¸­æ·»åŠ é…ç½®

```config
# Read more about SSH config files: https://linux.die.net/man/5/ssh_config
Host random_name
    HostName host_ip
    User user_name
```

é‡åˆ°äº†æŠ¥é”™ `Resolver error: Error: Running the contributed command: '_workbench.downloadResource' failed.` æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨ã€‚åŸå› å¯èƒ½åœ¨äºæœåŠ¡å™¨æ˜¯åœ¨å†…ç½‘ï¼Œæ²¡æœ‰åŠæ³•åœ¨æœåŠ¡å™¨ä¸Šè‡ªåŠ¨ä¸‹è½½å¥½ vscode-serverï¼Œäºæ˜¯åªèƒ½æœ¬åœ°ä¸‹è½½ï¼Œç„¶åä¸Šä¼ 

å‚è€ƒ [CSDN](https://blog.csdn.net/ibless/article/details/118610776) è§£å†³é—®é¢˜

## å…¶ä»–æŠ€å·§

### VSCode with container

æƒ³è¦ vscode ç¼–è¾‘ docker å®¹å™¨ä¸­çš„æ–‡ä»¶ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ–¹æ³• 

1. ä¸‹è½½ docker å’Œ remote-container æ’ä»¶ï¼Œæˆ–è€…ç›´æ¥ä¸‹è½½ **remote development** ä¸€æ­¥åˆ°ä½ï¼

2. åœ¨ side bar ä¸­å¯ä»¥çœ‹åˆ° docker å·¥å…·æ ï¼Œå¯ä»¥è½»æ¾å¯åŠ¨å®¹å™¨

   <img src="VSCode note/image-20211028115235998.png"  />

3. å¯åŠ¨å®¹å™¨åï¼Œé€‰æ‹© `Attach Visual Studio Code` å°±å¯ä»¥æ‰“å¼€æ–°çš„çª—å£ï¼Œæ–°çª—å£çš„ç•Œé¢å°±åƒ vscode åœ¨å®¹å™¨ä¸­è¿è¡Œä¸€æ ·

   <img src="VSCode note/image-20211028115404905.png"  />

å¦‚æœåœ¨ Linux ä¸Šé‡åˆ°è¿æ¥é—®é¢˜ `error "connect EACCES /var/run/docker.sock"` è¿™æ˜¯ç”±äº docker æƒé™é€ æˆï¼Œå¯ä»¥æŒ‰ç…§ [å®˜æ–¹æç¤º](https://github.com/microsoft/vscode-docker/wiki/Troubleshooting)  å¯ä»¥å°è¯•è§£å†³ã€‚å¦‚æœè¿˜ä¸èƒ½è§£å†³ï¼Œç›´æ¥é€šè¿‡ä¿®æ”¹ `docker.sock` æ–‡ä»¶çš„æƒé™ä¸€æ­¥åˆ°ä½

```shell
sudo chmod 666 /var/run/docker.sock
```

æˆ–è€…å°†è‡ªå·±çš„ç”¨æˆ·åŠ å…¥ docker group å³å¯ï¼Œå‚è€ƒ [èœé¸Ÿæ•™ç¨‹](https://www.runoob.com/note/51562)

```shell
sudo groupadd docker     #æ·»åŠ dockerç”¨æˆ·ç»„
sudo gpasswd -a $USER docker     #å°†ç™»é™†ç”¨æˆ·åŠ å…¥åˆ°dockerç”¨æˆ·ç»„ä¸­
newgrp docker     #æ›´æ–°ç”¨æˆ·ç»„
docker ps    #æµ‹è¯•dockerå‘½ä»¤æ˜¯å¦å¯ä»¥ä½¿ç”¨sudoæ­£å¸¸ä½¿ç”¨
```

### VSCode å…å¯†ç™»å½•

å®Œæˆä»¥ä¸‹æ­¥éª¤å³å¯ï¼š

1. ç”Ÿæˆæœ¬åœ° ssh-keyï¼Œå’Œ git æ“ä½œæ˜¯ä¸€æ ·çš„

   ```shell
   ssh-keygen -t rsa
   ```

2. å°† `id_rsa.pub` å¤åˆ¶åˆ°æœåŠ¡å™¨ä¸»æœº `~/.ssh` æ–‡ä»¶å¤¹ä¸‹ï¼Œå°† `id_rsa.pub` çš„å†…å®¹åŠ å…¥åˆ° `authorized_keys` ä¸­

   ```shell
   cat id_rsa.pub >> authorized_keys
   ```

3. é‡å¯ ssh æœåŠ¡ `service sshd restart`

å…¶ä»–æ“ä½œå’Œä¸€èˆ¬ remote-ssh æ˜¯ä¸€æ ·çš„ï¼ŒæŒ‰é»˜è®¤å¡«å†™é…ç½®æ–‡ä»¶å³å¯ï¼Œä¸éœ€è¦é…ç½® `IdentityFile` å…³é”®å­—

```config
Host Arbitrary_Nane
  HostName Host_ip
  User User_Name
```

### VSCode X11 forward

ä½¿ç”¨ X server è§£å†³æ— æ³•å¯è§†åŒ–å›¾å½¢ç•Œé¢çš„é—®é¢˜ã€‚ä¸€èˆ¬æ¥è®²ä½¿ç”¨ ssh è¿æ¥åˆ°æœåŠ¡å™¨åæ˜¯ä¸èƒ½ä½¿ç”¨å›¾å½¢åŒ–ç•Œé¢æœåŠ¡çš„ï¼Œä¾‹å¦‚ä½¿ç”¨  firefox æµè§ˆå™¨ã€‚ä¸€äº›è½¯ä»¶è‡ªå¸¦ X serverï¼Œä¾‹å¦‚ MobaXtermï¼Œå½“è¿æ¥ä¸ŠæœåŠ¡å™¨åï¼Œå¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œè¾“å…¥ `firefox`ï¼Œç„¶åå°±èƒ½å¼¹å‡ºæµè§ˆå™¨çª—å£ã€‚å¦‚æœç”µè„‘ä¸Šæ²¡æœ‰ X server åˆ™éœ€è¦è‡ªè¡Œå®‰è£…ï¼Œæˆ–è€…ç›´æ¥æŠŠ MobaXterm æŒ‚åœ¨æ—è¾¹å³å¯ã€‚æ›´å¤šç§‘æ™®å†…å®¹å‚è€ƒ [åšå®¢](https://www.jianshu.com/p/1a296191a122)

ç°åœ¨åœ¨ VSCode Remote-SSH ä¸Šä¹Ÿæ”¯æŒäº† X11 forwardingï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤å®Œæˆ

é¦–å…ˆä¿®æ”¹é…ç½® vscode `settings.json` ä¸­ `terminal.integrated.env.windows` å­—æ®µï¼Œæ·»åŠ æœ¬åœ°æ˜¾ç¤ºå˜é‡

```json
    "terminal.integrated.env.windows": {
        "DISPLAY": "127.0.0.1:0.0"
 }
```

ç„¶ååœ¨ ssh é…ç½®æ–‡ä»¶ä¸­åŠ å…¥ç›¸å…³å­—æ®µ

```config
Host Arbitrary_Nane
  HostName Host_ip
  User User_Name
  ForwardAgent yes
  ForwardX11 yes
  ForwardX11Trusted yes
```

æœ€ååœ¨æœåŠ¡å™¨ä¸ŠæŒ‡å®š `DISPLAY` ç¯å¢ƒå˜é‡

```shell
export DISPLAY="localhost:10.0"
```

æ³¨æ„ï¼Œ10.0 è¿™ä¸ªæ•°å­—æ˜¯æ ¹æ® .Xauthority æ–‡ä»¶ç¡®å®šï¼Œå¯ä»¥é€šè¿‡ xauth list å‘½ä»¤æŸ¥çœ‹ã€‚å¾—åˆ°åˆ—è¡¨å¯èƒ½ä¼šæ¯”è¾ƒé•¿ï¼Œæˆ‘å¯¹è¿™ä¸€å—ä¸æ˜¯å¾ˆäº†è§£...ç»éªŒæ¥çœ‹ï¼Œå…³æ³¨çš„æ˜¯æœ€åä¸€è¡Œï¼Œæˆ–è€… unix:index æœ€å°çš„é‚£ä¸€è¡Œ

```shell
user@linux xauth list
linux/unix:12  MIT-MAGIC-COOKIE-1  78cbc********************c64
```

è¿™é‡Œçœ‹åˆ° `unix:12` æ‰€ä»¥æˆ‘ä»¬é…ç½® `DISPLAY` å˜é‡æ—¶åº”è¯¥ä¸º `export DISPLAY="localhost:12.0"`

ä½¿ç”¨ `xeyes` æµ‹è¯•ä¸€ä¸‹ï¼Œå¦‚æœçœ‹åˆ°ä¸€ä¸ªçœ¼ç›çª—å£å°±æˆåŠŸäº†ğŸ˜

### Docker with GUI

å¦‚æœèƒ½å¤Ÿåœ¨ Docker ä¸­ä½¿ç”¨ GUI app å²‚ä¸æ˜¯ç¾æ»‹æ»‹ï¼Ÿæ—¢ç„¶èƒ½å¤Ÿåœ¨ VSCode ä¸­é€šè¿‡ X11 forward åè®®è¿è¡Œå›¾å½¢ç•Œé¢ï¼Œé‚£ä¹ˆç†è®ºä¸Š Docker ä¹Ÿæ˜¯å¯ä»¥çš„ï¼æ ¹æ®è¿™ä¸¤ä¸ªåšå®¢ï¼š[Link-1](https://www.cnblogs.com/larva-zhh/p/10531824.html) [Link-2](https://medium.com/@SaravSun/running-gui-applications-inside-docker-containers-83d65c0db110) è¿›è¡Œé…ç½®ï¼Œæ„æƒ³ä¸åˆ°åœ°æˆåŠŸäº†ï¼Œè¯´æ˜åšå®¢ä¸­çš„åŸç†æ˜¯æ­£ç¡®çš„ï¼Œåªè¦å°† Host ä¸­çš„ X11 æœåŠ¡å™¨åˆ†äº«ç»™ Docker å°±å¯ä»¥ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š

1. Share the Hostâ€™s XServer with the Container by creating a volume

   ```shell
   --volume="$HOME/.Xauthority:/root/.Xauthority:rw"
   ```

   éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¯æ¬¡ç™»å½•çš„æ—¶ Host `.Xauthority` æ˜¯ä¸ä¸€æ ·çš„ï¼Œå¦‚æœç›´æ¥å¤åˆ¶è¯¥æ–‡ä»¶çš„è¯ï¼Œè¦æ¯æ¬¡æ›´æ–°

2. share the Hostâ€™s **DISPLAY** environment variable to the Container

   ```shell
   --env="DISPLAY"
   ```

3. Run container with **host** network driver with

   ```shell
   --net=host
   ```
